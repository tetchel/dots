#!/usr/bin/env node

const exec = require("child_process").exec;

const cmd = "kubectl get secrets -n services oauth-client-secret -o json"
console.log("Executing " + cmd);
exec(cmd, (err, stdout, stderr) => {
    if (err) {
        console.error(err);
        process.exit(1);
    }
    const output = JSON.parse(stdout);
    const encodedSecret = output.data.WLP_CLIENT_REGISTRATION_SECRET;
    const secret = Buffer.from(encodedSecret, "base64").toString("ascii");
    console.log("Username=oauthadmin and password=" + secret);
});
